if(typeof define==="function"){define("puremvc_async",["puremvc"],function(b){var a=this.__extends||function(g,e){function f(){this.constructor=g}f.prototype=e.prototype;g.prototype=new f()};var c;(function(e){var d=(function(g){a(f,g);function f(){g.apply(this,arguments)}f.prototype.setOnComplete=function(h){this.onComplete=h};f.prototype.commandComplete=function(){this.onComplete()};return f})(b.SimpleCommand);e.AsyncCommand=d})(c||(c={}));var c;(function(e){var d=(function(f){a(g,f);function g(){f.call(this);
this.subCommands=null;this.subCommands=new Array();this.initializeMacroCommand()}g.prototype.initializeMacroCommand=function(){};g.prototype.addSubCommand=function(h){this.subCommands.push(h)};g.prototype.setOnComplete=function(h){this.onComplete=h};g.prototype.execute=function(h){this.note=h;this.nextCommand()};g.prototype.nextCommand=function(){if(this.subCommands.length>0){var j=this.subCommands.shift();var i=new j();var h=i instanceof e.AsyncCommand;if(h){(i).setOnComplete(this.nextCommand.bind(this))
}(i).execute(this.note);if(!h){this.nextCommand()}}else{if(this.onComplete){this.onComplete()}this.note=null;this.onComplete=null}};return g})(b.Notifier);e.AsyncMacroCommand=d})(c||(c={}));return c})};